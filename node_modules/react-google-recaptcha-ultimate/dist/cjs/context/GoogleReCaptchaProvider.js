/* @license react-google-recaptcha-ultimate v1.2.2 */
"use strict";var e=require("../_rollupPluginBabelHelpers-e2094211.js"),r=require("react"),t=require("../utils/helpers/checkGoogleReCaptchaInjected.js"),o=require("../utils/helpers/hideGoogleReCaptchaBadge.js"),a=require("../utils/helpers/injectGoogleReCaptchaScript.js"),n=require("../utils/helpers/removeGoogleReCaptchaBadge.js"),i=require("../utils/helpers/removeGoogleReCaptchaContainer.js"),l=require("../utils/helpers/removeGoogleReCaptchaScript.js"),c=require("./GoogleReCaptchaContext.js");require("../utils/helpers/generateGoogleReCaptchaHiddenBadgeStyles.js"),require("../utils/helpers/generateGoogleReCaptchaScriptSrc.js");exports.GoogleReCaptchaProvider=function(s){var u=s.type,d=s.siteKey,p=s.language,g=s.scriptProps,h=s.isEnterprise,v=void 0!==h&&h,b=s.host,C=s.children,R=s.explicit,f=s.onLoad,G=s.onError,j=r.useState(!0),x=e._slicedToArray(j,2),m=x[0],w=x[1],S=r.useState(),_=e._slicedToArray(S,2),y=_[0],k=_[1];r.useEffect((function(){var r;if(!d)throw new Error("Google ReCaptcha site key not provided");var c=null!==(r=null==g?void 0:g.id)&&void 0!==r?r:"google-recaptcha-script",s=t.checkGoogleReCaptchaInjected(c),h=function(){var r,t=v?null===(r=window.grecaptcha)||void 0===r?void 0:r.enterprise:window.grecaptcha;if(t){if(R||t.ready(e._asyncToGenerator(e._regeneratorRuntime().mark((function r(){return e._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k(t),!f){e.next=4;break}return e.next=4,f(t);case 4:w(!0);case 5:case"end":return e.stop()}}),r)})))),R){var a=e._objectSpread2(e._objectSpread2({size:"v3"===u||"v2-invisible"===u?"invisible":"normal"},("v3"===u||"v2-invisible"===u)&&{badge:"bottomright"}),{},{sitekey:d},R);if(!s)("v3"===u||"v2-invisible"===u)&&"hidden"===(null==R?void 0:R.badge)&&o.hideGoogleReCaptchaBadge();t.ready(e._asyncToGenerator(e._regeneratorRuntime().mark((function r(){return e._regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.container&&t.render(R.container,a,!!R.inherit),k(t),!f){e.next=5;break}return e.next=5,f(t);case 5:w(!0);case 6:case"end":return e.stop()}}),r)}))))}}else G&&G()};return window.onGoogleReCaptchaLoad=h,s?h():a.injectGoogleReCaptchaScript(e._objectSpread2(e._objectSpread2(e._objectSpread2(e._objectSpread2({isEnterprise:v,host:b},("v3"===u||"v2-invisible"===u)&&(null==R?void 0:R.badge)&&{badge:"hidden"===(null==R?void 0:R.badge)?"bottomright":null==R?void 0:R.badge}),p&&{hl:p}),{},{render:("v3"===u||"v2-invisible"===u)&&null!=R&&R.container||"v2-checkbox"===u?"explicit":d},g),{},{onload:h,id:c})),function(){null==y||y.reset(),s||l.removeGoogleReCaptchaScript(c),"v3"!==u&&"v2-invisible"!==u||null!=R&&R.container||null==R||!R.badge?n.removeGoogleReCaptchaBadge():i.removeGoogleReCaptchaContainer("google-recaptcha-container")}}),[v,p,b]);var q=r.useCallback((function(e){if(null==y||!y.execute)throw new Error("Google ReCaptcha has not been loaded");return y.execute(d,{action:e})}),[y]),E=r.useCallback((function(e){if(null==y||!y.execute)throw new Error("Google ReCaptcha has not been loaded");return y.execute(e)}),[y]),B=r.useMemo((function(){return e._objectSpread2({googleReCaptcha:y,siteKey:d,isLoading:m,executeV2Invisible:E,executeV3:q,reset:null==y?void 0:y.reset,getResponse:null==y?void 0:y.getResponse,render:null==y?void 0:y.render},p&&{language:p})}),[d,y,m,p]);return r.createElement(c.GoogleReCaptchaContextProvider,{value:B},C)};
//# sourceMappingURL=GoogleReCaptchaProvider.js.map
